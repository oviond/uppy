{"version":3,"names":["UIPlugin","Provider","ProviderViews","h","packageJson","locale","Facebook","constructor","uppy","opts","id","initPlugin","title","icon","focusable","width","height","viewBox","fill","fillRule","d","provider","companionUrl","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","supportsRefreshToken","defaultLocale","i18nInit","i18n","onFirstRender","bind","render","install","view","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","viewOptions","getPluginState","files","length","folders","viewType","showFilter","showTitles","VERSION","version"],"sources":["Facebook.jsx"],"sourcesContent":["import { UIPlugin } from '@uppy/core'\nimport { Provider } from '@uppy/companion-client'\nimport { ProviderViews } from '@uppy/provider-views'\nimport { h } from 'preact'\n\nimport packageJson from '../package.json'\nimport locale from './locale.js'\n\nexport default class Facebook extends UIPlugin {\n  static VERSION = packageJson.version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'Facebook'\n    Provider.initPlugin(this, opts)\n    this.title = this.opts.title || 'Facebook'\n    this.icon = () => (\n      <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path d=\"M27 16c0-6.075-4.925-11-11-11S5 9.925 5 16c0 5.49 4.023 10.041 9.281 10.866V19.18h-2.793V16h2.793v-2.423c0-2.757 1.642-4.28 4.155-4.28 1.204 0 2.462.215 2.462.215v2.707h-1.387c-1.366 0-1.792.848-1.792 1.718V16h3.05l-.487 3.18h-2.563v7.686C22.977 26.041 27 21.49 27 16\" fill=\"#1777F2\" />\n          <path d=\"M20.282 19.18L20.77 16h-3.051v-2.063c0-.87.426-1.718 1.792-1.718h1.387V9.512s-1.258-.215-2.462-.215c-2.513 0-4.155 1.523-4.155 4.28V16h-2.793v3.18h2.793v7.686a11.082 11.082 0 003.438 0V19.18h2.563\" fill=\"#FFFFFE\" />\n        </g>\n      </svg>\n    )\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'facebook',\n      pluginId: this.id,\n      supportsRefreshToken: false,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameFacebook')\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new ProviderViews(this, {\n      provider: this.provider,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder(),\n    ])\n  }\n\n  render (state) {\n    const viewOptions = {}\n    if (this.getPluginState().files.length && !this.getPluginState().folders.length) {\n      viewOptions.viewType = 'grid'\n      viewOptions.showFilter = false\n      viewOptions.showTitles = false\n    }\n    return this.view.render(state, viewOptions)\n  }\n}\n"],"mappings":"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"}