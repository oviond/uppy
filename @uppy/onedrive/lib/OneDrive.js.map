{"version":3,"names":["h","UIPlugin","Provider","ProviderViews","packageJson","locale","OneDrive","constructor","uppy","opts","id","initPlugin","title","icon","focusable","width","height","viewBox","fill","fillRule","d","provider","companionUrl","companionHeaders","companionCookiesRule","pluginId","supportsRefreshToken","defaultLocale","i18nInit","i18n","onFirstRender","bind","render","install","view","loadAllFiles","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","VERSION","version"],"sources":["OneDrive.jsx"],"sourcesContent":["import { h } from 'preact'\n\nimport { UIPlugin } from '@uppy/core'\nimport { Provider } from '@uppy/companion-client'\nimport { ProviderViews } from '@uppy/provider-views'\n\nimport packageJson from '../package.json'\nimport locale from './locale.js'\n\nexport default class OneDrive extends UIPlugin {\n  static VERSION = packageJson.version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'OneDrive'\n    Provider.initPlugin(this, opts)\n    this.title = this.opts.title || 'OneDrive'\n    this.icon = () => (\n      <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n        <g fill=\"none\" fillRule=\"nonzero\">\n          <path d=\"M13.39 12.888l4.618 2.747 2.752-1.15a4.478 4.478 0 012.073-.352 6.858 6.858 0 00-5.527-5.04 6.895 6.895 0 00-6.876 2.982l.07-.002a5.5 5.5 0 012.89.815z\" fill=\"#0364B8\" />\n          <path d=\"M13.39 12.887v.001a5.5 5.5 0 00-2.89-.815l-.07.002a5.502 5.502 0 00-4.822 2.964 5.43 5.43 0 00.38 5.62l4.073-1.702 1.81-.757 4.032-1.685 2.105-.88-4.619-2.748z\" fill=\"#0078D4\" />\n          <path d=\"M22.833 14.133a4.479 4.479 0 00-2.073.352l-2.752 1.15.798.475 2.616 1.556 1.141.68 3.902 2.321a4.413 4.413 0 00-.022-4.25 4.471 4.471 0 00-3.61-2.284z\" fill=\"#1490DF\" />\n          <path d=\"M22.563 18.346l-1.141-.68-2.616-1.556-.798-.475-2.105.88L11.87 18.2l-1.81.757-4.073 1.702A5.503 5.503 0 0010.5 23h12.031a4.472 4.472 0 003.934-2.333l-3.902-2.321z\" fill=\"#28A8EA\" />\n        </g>\n      </svg>\n    )\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'onedrive',\n      pluginId: this.id,\n      supportsRefreshToken: false,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameOneDrive')\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new ProviderViews(this, {\n      provider: this.provider,\n      loadAllFiles: true,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder(),\n    ])\n  }\n\n  render (state) {\n    return this.view.render(state)\n  }\n}\n"],"mappings":"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"}