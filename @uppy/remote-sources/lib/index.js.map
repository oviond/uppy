{"version":3,"names":["BasePlugin","Dropbox","GoogleDrive","Instagram","Facebook","OneDrive","Box","Unsplash","Url","Zoom","packageJson","availablePlugins","__proto__","_installedPlugins","_classPrivateFieldLooseKey","RemoteSources","constructor","uppy","opts","Object","defineProperty","writable","value","Set","id","type","defaultOptions","sources","keys","companionUrl","Error","setOptions","newOpts","uninstall","install","forEach","pluginId","optsForRemoteSourcePlugin","undefined","plugin","pluginNames","formatter","Intl","ListFormat","style","format","use","_classPrivateFieldLooseBase","add","getPlugin","removePlugin","clear","VERSION","version"],"sources":["index.js"],"sourcesContent":["import { BasePlugin } from '@uppy/core'\nimport Dropbox from '@uppy/dropbox'\nimport GoogleDrive from '@uppy/google-drive'\nimport Instagram from '@uppy/instagram'\nimport Facebook from '@uppy/facebook'\nimport OneDrive from '@uppy/onedrive'\nimport Box from '@uppy/box'\nimport Unsplash from '@uppy/unsplash'\nimport Url from '@uppy/url'\nimport Zoom from '@uppy/zoom'\n\nimport packageJson from '../package.json'\n\nconst availablePlugins = {\n  // Using a null-prototype object to avoid prototype pollution.\n  __proto__: null,\n  Box,\n  Dropbox,\n  Facebook,\n  GoogleDrive,\n  Instagram,\n  OneDrive,\n  Unsplash,\n  Url,\n  Zoom,\n}\n\nexport default class RemoteSources extends BasePlugin {\n  static VERSION = packageJson.version\n\n  #installedPlugins = new Set()\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'RemoteSources'\n    this.type = 'preset'\n\n    const defaultOptions = {\n      sources: Object.keys(availablePlugins),\n    }\n    this.opts = { ...defaultOptions, ...opts }\n\n    if (this.opts.companionUrl == null) {\n      throw new Error('Please specify companionUrl for RemoteSources to work, see https://uppy.io/docs/remote-sources#companionUrl')\n    }\n  }\n\n  setOptions (newOpts) {\n    this.uninstall()\n    super.setOptions(newOpts)\n    this.install()\n  }\n\n  install () {\n    this.opts.sources.forEach((pluginId) => {\n      const optsForRemoteSourcePlugin = { ...this.opts, sources: undefined }\n      const plugin = availablePlugins[pluginId]\n      if (plugin == null) {\n        const pluginNames = Object.keys(availablePlugins)\n        const formatter = new Intl.ListFormat('en', { style: 'long', type: 'disjunction' })\n        throw new Error(`Invalid plugin: \"${pluginId}\" is not one of: ${formatter.format(pluginNames)}.`)\n      }\n      this.uppy.use(plugin, optsForRemoteSourcePlugin)\n      // `plugin` is a class, but we want to track the instance object\n      // so we have to do `getPlugin` here.\n      this.#installedPlugins.add(this.uppy.getPlugin(pluginId))\n    })\n  }\n\n  uninstall () {\n    for (const plugin of this.#installedPlugins) {\n      this.uppy.removePlugin(plugin)\n    }\n    this.#installedPlugins.clear()\n  }\n}\n"],"mappings":"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"}